<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Token Lebnani - Strategy</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --glass-surface: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.1);
            --glass-highlight: rgba(255, 255, 255, 0.08);
            --gold-primary: #D4AF37;
            --gold-glow: rgba(212, 175, 55, 0.4);
            --text-white: #ffffff;
            --text-dim: rgba(255, 255, 255, 0.6);
            --navy-deep: #050A1F;
            --transition: 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', sans-serif;
            color: var(--text-white);
            min-height: 100vh;
            background-color: var(--navy-deep);
            background: radial-gradient(circle at 50% 50%, #0F172A 0%, #020617 100%);
            overflow-x: hidden;
            padding-bottom: 100px;
        }

        /* --- PARALLAX BACKGROUND --- */
        .parallax-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
            overflow: hidden;
        }

        .glow-orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.4;
            transition: transform 0.1s linear;
        }

        .orb-1 { top: -10%; left: -10%; width: 600px; height: 600px; background: radial-gradient(circle, #1e3a8a, transparent); }
        .orb-2 { bottom: -10%; right: -10%; width: 700px; height: 700px; background: radial-gradient(circle, #4c1d95, transparent); }
        .orb-3 { top: 40%; left: 40%; width: 400px; height: 400px; background: radial-gradient(circle, rgba(212, 175, 55, 0.15), transparent); }

        /* --- SIDEBAR NAV --- */
        .sidebar-nav {
            position: fixed;
            right: 30px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 20px;
            z-index: 100;
        }

        .nav-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            border: 1px solid transparent;
        }

        .nav-dot:hover, .nav-dot.active {
            background: var(--gold-primary);
            box-shadow: 0 0 10px var(--gold-glow);
        }

        /* Tooltip */
        .nav-dot::before {
            content: attr(data-label);
            position: absolute;
            right: 25px;
            top: 50%;
            transform: translateY(-50%) translateX(10px);
            background: rgba(0,0,0,0.8);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            color: var(--gold-primary);
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s ease;
            white-space: nowrap;
            border: 1px solid var(--glass-border);
        }

        .nav-dot:hover::before {
            opacity: 1;
            transform: translateY(-50%) translateX(0);
        }

        /* --- HEADER --- */
        header {
            padding: 60px 20px 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 10;
        }

        .main-titles {
            text-align: center;
            margin-bottom: 30px;
            animation: fadeInDown 1s ease-out;
        }

        h1 {
            font-family: 'Cinzel', serif;
            font-size: 3rem;
            background: linear-gradient(to right, #ffffff, #94a3b8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 0 4px 30px rgba(0,0,0,0.5);
            margin-bottom: 10px;
        }

        h2 {
            font-family: 'Inter', sans-serif;
            font-size: 1.1rem;
            color: var(--gold-primary);
            letter-spacing: 4px;
            text-transform: uppercase;
            font-weight: 300;
        }

        /* --- SEARCH BAR --- */
        .search-container {
            width: 100%;
            max-width: 600px;
            position: relative;
            margin-bottom: 20px;
            animation: fadeIn 1.2s ease-out;
        }

        .search-input {
            width: 100%;
            padding: 16px 50px 16px 24px;
            border-radius: 30px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--glass-border);
            color: #fff;
            font-size: 1rem;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            outline: none;
        }

        .search-input:focus {
            background: rgba(0, 0, 0, 0.5);
            border-color: var(--gold-primary);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.15);
        }

        .search-icon {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            stroke: var(--text-dim);
            pointer-events: none;
        }

        /* --- TREE CONTAINER --- */
        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* --- ROOT NODE --- */
        .root-node {
            margin-bottom: 30px;
            border-radius: 16px;
            background: var(--glass-surface);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.4);
            transition: all 0.5s ease;
            overflow: hidden;
            opacity: 0; /* For staggered animation */
            transform: translateY(30px);
        }

        .slide-in {
            animation: slideUpFade 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
        }

        .root-node:hover {
            border-color: rgba(212, 175, 55, 0.3);
            box-shadow: 0 12px 40px 0 rgba(0, 0, 0, 0.5);
        }

        .root-node.dimmed {
            opacity: 0.2;
            filter: grayscale(1);
            transform: scale(0.98);
        }

        .root-header {
            padding: 30px 35px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            border-bottom: 1px solid transparent;
            transition: var(--transition);
            position: relative;
        }

        .root-header::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 4px;
            background: var(--gold-primary);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .root-header.active::before {
            opacity: 1;
        }

        .root-header.active {
            background: rgba(212, 175, 55, 0.05);
            border-bottom: 1px solid var(--glass-border);
        }

        .root-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--gold-primary);
            letter-spacing: 0.5px;
        }

        .root-subtitle {
            display: block;
            font-size: 0.95rem;
            color: var(--text-dim);
            margin-top: 8px;
            font-style: italic;
        }

        /* --- CHILD LIST --- */
        .child-list-wrapper {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.6s cubic-bezier(0.25, 1, 0.5, 1);
        }

        .child-list {
            padding: 15px 35px 35px 35px;
        }

        /* --- CHILD NODE --- */
        .child-node {
            margin-top: 15px;
            border-radius: 12px;
            background: rgba(0, 0, 0, 0.25);
            border: 1px solid rgba(255, 255, 255, 0.05);
            overflow: hidden;
            transition: var(--transition);
        }

        .child-node.dimmed {
            opacity: 0.2;
        }

        .child-header {
            padding: 20px 25px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            transition: var(--transition);
        }

        .child-header:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .child-title {
            font-size: 1.05rem;
            font-weight: 500;
            color: #e2e8f0;
        }

        /* --- CONTENT --- */
        .child-content-wrapper {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
            background: rgba(0, 0, 0, 0.4); 
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }

        .child-content {
            padding: 30px;
            font-size: 1rem;
            line-height: 1.8;
            color: #cbd5e1;
        }

        .child-content strong {
            color: var(--gold-primary);
            display: block;
            margin-top: 15px;
            margin-bottom: 5px;
            font-weight: 600;
        }
        .child-content strong:first-child { margin-top: 0; }

        .highlight {
            background-color: rgba(212, 175, 55, 0.3);
            color: #fff;
            padding: 2px 4px;
            border-radius: 4px;
        }

        .arrow-icon {
            width: 20px;
            height: 20px;
            stroke: var(--gold-primary);
            opacity: 0.8;
            transition: transform 0.4s ease;
            flex-shrink: 0;
            margin-left: 20px;
        }

        .root-header.active .arrow-icon,
        .child-header.active .arrow-icon {
            transform: rotate(180deg);
            stroke: #fff;
        }

        /* --- ANIMATIONS --- */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideUpFade {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 768px) {
            header { padding-top: 100px; }
            h1 { font-size: 2rem; }
            .root-header { padding: 20px; flex-direction: column; align-items: flex-start; gap: 15px; }
            .root-header .arrow-icon { position: absolute; right: 20px; top: 25px; }
            .child-list { padding: 10px 15px 25px 15px; }
            .sidebar-nav { display: none; }
        }
    </style>
</head>
<body>

    <div class="parallax-wrapper" id="parallax">
        <div class="glow-orb orb-1" data-speed="0.05"></div>
        <div class="glow-orb orb-2" data-speed="0.08"></div>
        <div class="glow-orb orb-3" data-speed="0.03"></div>
    </div>

    <nav class="sidebar-nav">
        <div class="nav-dot" data-target="step1" data-label="Asset Sourcing"></div>
        <div class="nav-dot" data-target="step4" data-label="Operations"></div>
        <div class="nav-dot" data-target="step7" data-label="Investment"></div>
    </nav>

    <header id="header">
        <div class="logo-container" style="margin-bottom: 15px; text-align: center;">
            <a href="home.html">
                <img src="images/logo.png" alt="Token Lebnani" style="width: 100px; height: auto; display: inline-block;">
            </a>
        </div>

        <nav style="margin-bottom: 30px; text-align: center; font-family: 'Inter', sans-serif; font-size: 0.9rem;">
            <a href="home.html" style="color: #cbd5e1; text-decoration: none; margin: 0 15px;">HOME</a>
            <span style="color: #475569;">|</span>
            <a href="strategy.html" style="color: #d4af37; text-decoration: none; margin: 0 15px; border-bottom: 1px solid #d4af37;">STRATEGY</a>
            <span style="color: #475569;">|</span>
            <a href="architecture.html" style="color: #cbd5e1; text-decoration: none; margin: 0 15px;">ARCHITECTURE</a>
        </nav>

        <div class="main-titles">
            <h1>Strategic Execution</h1>
            <h2>Token Lebnani Strategy</h2>
            <div style="margin-top: 10px; font-size: 0.9rem; opacity: 0.7;">FROM ASSET SOURCING TO LIQUIDITY</div>
        </div>
        
        <div class="search-container">
            <input type="text" id="searchInput" class="search-input" placeholder="Search strategy (e.g., 'SPV', 'Tokens', 'Arbitration')...">
            <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
        </div>
    </header>

    <main class="container" id="treeContainer"></main>

    <script>
        // --- DATA ---
        // Populated with editorial content from the original strategy.html
        const treeData = [
            {
                id: 'step1',
                title: 'Step 1: Asset Sourcing & Contract Execution',
                subtitle: 'The Initiation Phase',
                children: [
                    {
                        title: 'WHAT',
                        content: 'Token Lebnani identifies, evaluates, and signs an exclusive agreement with a property owner to tokenize their asset.'
                    },
                    {
                        title: 'WHY',
                        content: 'Token Lebnani operates as a facilitator, not as an asset owner. This exclusive contract is the trigger that initiates the entire tokenization process.'
                    },
                    {
                        title: 'HOW',
                        content: 'The Head of Asset Origination negotiates terms including the percentage of ownership to be fractionalized, valuation methodology, and fees. Only after this binding agreement is signed does the structuring process begin.'
                    }
                ]
            },
            {
                id: 'step2',
                title: 'Step 2: Your Investment Gets a UAE Legal Shield',
                subtitle: 'ADGM Holding Company Formation',
                children: [
                    {
                        title: 'WHAT',
                        content: 'We create a UAE-based Holding Company (in Abu Dhabi Global Market) that will own the property.'
                    },
                    {
                        title: 'WHY',
                        content: 'This establishes the legal foundation that will ultimately hold the asset under English Common Law protection.'
                    },
                    {
                        title: 'HOW',
                        content: 'Token Lebnani incorporates the Holding Company under ADGM regulations, establishing the regulatory framework that governs investor rights and asset protection.'
                    }
                ]
            },
            {
                id: 'step3',
                title: 'Step 3: The Asset Is Secured',
                subtitle: 'Transfer to Lebanese SPV',
                children: [
                    {
                        title: 'WHAT',
                        content: 'The Lebanese property is legally transferred to a dedicated Lebanese Special Purpose Vehicle (SPV - a Lebanese registered company).'
                    },
                    {
                        title: 'WHY',
                        content: 'This "Asset-First" model ensures the SPV owns the physical title deed before any tokens are sold, eliminating counterparty risk.'
                    },
                    {
                        title: 'HOW',
                        content: 'The property deed is transferred through a Lebanese notary into the SPV\'s name, with the ADGM Holding Company registered as the sole owner. Legal validation ensures compliance with Lebanese foreign ownership rules.'
                    }
                ]
            },
            {
                id: 'step4',
                title: 'Step 4: Professional Managers Handle Everything',
                subtitle: 'Operational Management',
                children: [
                    {
                        title: 'WHAT',
                        content: 'The ADGM Holding Company appoints a professional Facility Management Company (FMC) to manage the property.'
                    },
                    {
                        title: 'WHY',
                        content: 'Investors are passive financial beneficiaries—they should not manage tenants, repairs, or taxes. The FMC ensures professional operations and reliable income collection.'
                    },
                    {
                        title: 'HOW',
                        content: 'The FMC signs a legally binding Facilities Management Agreement with the Lebanese SPV. This contract mandates rent collection, property maintenance, tax payments, and monthly reporting to the Holding Company.'
                    }
                ]
            },
            {
                id: 'step5',
                title: 'Step 5: Token Lebnani Cannot Access Your Tokens—Ever',
                subtitle: 'Custody & Control',
                children: [
                    {
                        title: 'WHAT',
                        content: '100% of the ownership tokens are initially issued to the property owner, then the pre-agreed percentage becomes available for sale on the Token Lebnani platform.'
                    },
                    {
                        title: 'WHY',
                        content: 'Token Lebnani operates as a regulated facilitator—never taking ownership of the asset or tokens. The platform simply enables the property owner to fractionally sell their equity through a secure, automated process.'
                    },
                    {
                        title: 'HOW',
                        content: 'Token Lebnani creates digital securities using institutional-grade technology. These tokens are special-purpose digital certificates sent directly to the owner\'s personal digital wallet. <strong>Token Lebnani has no ability to freeze, transfer, or control your assets</strong>.'
                    }
                ]
            },
            {
                id: 'step6',
                title: 'Step 6: Tokens Are Offered to Qualified Investors',
                subtitle: 'The Offering',
                children: [
                    {
                        title: 'WHAT',
                        content: 'Token Lebnani lists the tokens on its regulated platform for sale to Professional Clients.'
                    },
                    {
                        title: 'WHY',
                        content: 'This opens access to diaspora capital while complying with regulatory requirements—Token Lebnani never acts as a fund or exchange.'
                    },
                    {
                        title: 'HOW',
                        content: 'The property owner authorizes Token Lebnani to arrange the sale. Investors view the offering via a secure dashboard, complete identity verification, and are whitelisted in the system. Funds settle via a regulated Escrow Agent.'
                    }
                ]
            },
            {
                id: 'step7',
                title: 'Step 7: You Acquire Direct Economic Rights',
                subtitle: 'Purchase & Settlement',
                children: [
                    {
                        title: 'WHAT',
                        content: 'You purchase tokens that represent legal equity in the ADGM Holding Company—and thus pro-rata ownership of the Lebanese SPV and physical asset.'
                    },
                    {
                        title: 'WHY',
                        content: 'You are not buying a promise or a derivative—you are buying enforceable property rights.'
                    },
                    {
                        title: 'HOW',
                        content: 'You sign two binding instruments: 1) A Token Purchase Agreement (TPA) governed by ADGM law. 2) A Smart Contract that records your rights. Funds are wired in USD; tokens arrive in your wallet.'
                    }
                ]
            },
            {
                id: 'step8',
                title: 'Step 8: If a dispute arises, international law protects you',
                subtitle: 'Dispute Resolution',
                children: [
                    {
                        title: 'WHAT',
                        content: 'Your ownership is protected by Binding Arbitration under the New York Convention.'
                    },
                    {
                        title: 'WHY',
                        content: 'If a dispute arises, an ADGM judgment can be enforced directly against the Lebanese property—bypassing slow local courts entirely.'
                    },
                    {
                        title: 'HOW',
                        content: 'The Lebanese SPV\'s Articles of Association include Share Pledges and arbitration clauses. ADGM courts recognize your token ledger as the definitive shareholder register.'
                    }
                ]
            },
            {
                id: 'step9',
                title: 'Step 9: Earn, Trade, & Access',
                subtitle: 'Post-Investment Lifecycle',
                children: [
                    {
                        title: 'WHAT',
                        content: 'You receive quarterly income distributions, can trade tokens on regulated trading venues, and transfer ownership instantly upon death.'
                    },
                    {
                        title: 'WHY',
                        content: 'This solves the core Lebanese problems: illiquidity, probate delays, and opaque cash flows.'
                    },
                    {
                        title: 'HOW',
                        content: '<strong>Earn:</strong> Rental income is collected by FMC.<br><strong>Trade:</strong> Tokens compatible with regulated venues.<br><strong>Inherit:</strong> Simple recovery process for heirs.'
                    }
                ]
            }
        ];

        // --- RENDER LOGIC ---
        const container = document.getElementById('treeContainer');

        function renderTree(searchTerm = '') {
            container.innerHTML = ''; // Clear current
            
            treeData.forEach((root, index) => {
                const rootNode = document.createElement('div');
                rootNode.className = 'root-node';
                rootNode.id = root.id;
                rootNode.style.animationDelay = `${index * 0.15}s`; // Staggered entry
                rootNode.classList.add('slide-in');

                // Search filtering logic
                let rootMatches = false;
                if (searchTerm) {
                    const term = searchTerm.toLowerCase();
                    const titleMatch = root.title.toLowerCase().includes(term);
                    const subMatch = root.subtitle.toLowerCase().includes(term);
                    
                    // Check children
                    const childrenWithMatch = root.children.some(c => 
                        c.title.toLowerCase().includes(term) || 
                        c.content.toLowerCase().includes(term)
                    );

                    if (titleMatch || subMatch || childrenWithMatch) {
                        rootMatches = true;
                        rootNode.classList.remove('dimmed');
                    } else {
                        rootNode.classList.add('dimmed');
                    }
                } else {
                    rootNode.classList.remove('dimmed');
                }

                // Header
                const rootHeader = document.createElement('div');
                rootHeader.className = 'root-header';
                rootHeader.innerHTML = `
                    <div>
                        <div class="root-title">${highlightText(root.title, searchTerm)}</div>
                        <span class="root-subtitle">${highlightText(root.subtitle, searchTerm)}</span>
                    </div>
                    <svg class="arrow-icon" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
                `;

                // Child Wrapper
                const childWrapper = document.createElement('div');
                childWrapper.className = 'child-list-wrapper';
                const childList = document.createElement('div');
                childList.className = 'child-list';

                // Children
                let shouldExpandRoot =
